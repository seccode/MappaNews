<!DOCTYPE html>
<html>
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-99D533F059"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-99D533F059');
</script>
<meta charset="utf-8">
<title>Add an icon to the map</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.js"></script>
<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>
<div id="map"></div>

<script>
	mapboxgl.accessToken = 'pk.eyJ1Ijoic2VjZmFzdCIsImEiOiJjanVlbGRxbTUwNGVlNDlwcXRxNnFhYnlzIn0.-dc9uxSNW4TUYbC96E8zjA';
    const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v12',
        zoom: 6,
        center: [-73.432, 40.0306]
    });
    const images=[
	{src:S0,url:U0,id:"0",coords:C0},
	{src:S1,url:U1,id:"1",coords:C1},
	{src:S2,url:U2,id:"2",coords:C2},
	{src:S3,url:U3,id:"3",coords:C3},
	{src:S4,url:U4,id:"4",coords:C4},
	{src:S5,url:U5,id:"5",coords:C5},
	{src:S6,url:U6,id:"6",coords:C6},
	{src:S7,url:U7,id:"7",coords:C7},
	{src:S8,url:U8,id:"8",coords:C8},
	{src:S9,url:U9,id:"9",coords:C9},
	{src:S10,url:U10,id:"10",coords:C10},
	{src:S11,url:U11,id:"11",coords:C11},
	{src:S12,url:U12,id:"12",coords:C12},
	{src:S13,url:U13,id:"13",coords:C13},
	{src:S14,url:U14,id:"14",coords:C14},
	{src:S15,url:U15,id:"15",coords:C15},
	{src:S16,url:U16,id:"16",coords:C16},
	{src:S17,url:U17,id:"17",coords:C17},
	{src:S18,url:U18,id:"18",coords:C18},
	{src:S19,url:U19,id:"19",coords:C19},
	{src:S20,url:U20,id:"20",coords:C20},
	{src:S21,url:U21,id:"21",coords:C21},
	{src:S22,url:U22,id:"22",coords:C22},
	{src:S23,url:U23,id:"23",coords:C23},
	{src:S24,url:U24,id:"24",coords:C24},
	{src:S25,url:U25,id:"25",coords:C25},
	{src:S26,url:U26,id:"26",coords:C26},
	{src:S27,url:U27,id:"27",coords:C27},
	{src:S28,url:U28,id:"28",coords:C28},
	{src:S29,url:U29,id:"29",coords:C29},
	{src:S30,url:U30,id:"30",coords:C30},
	{src:S31,url:U31,id:"31",coords:C31},
	{src:S32,url:U32,id:"32",coords:C32},
	{src:S33,url:U33,id:"33",coords:C33},
	{src:S34,url:U34,id:"34",coords:C34},
	{src:S35,url:U35,id:"35",coords:C35},
	{src:S36,url:U36,id:"36",coords:C36},
	{src:S37,url:U37,id:"37",coords:C37},
	{src:S38,url:U38,id:"38",coords:C38},
	{src:S39,url:U39,id:"39",coords:C39},
	{src:S40,url:U40,id:"40",coords:C40},
	{src:S41,url:U41,id:"41",coords:C41},
	{src:S42,url:U42,id:"42",coords:C42},
	{src:S43,url:U43,id:"43",coords:C43},
	{src:S44,url:U44,id:"44",coords:C44},
	{src:S45,url:U45,id:"45",coords:C45},
	{src:S46,url:U46,id:"46",coords:C46},
	{src:S47,url:U47,id:"47",coords:C47},
	{src:S48,url:U48,id:"48",coords:C48},
	{src:S49,url:U49,id:"49",coords:C49},
    ]
    map.on('load', () => {
	images.forEach(img => {
		map.loadImage(
		    img.src,
		    (error, image) => {
			if (error) throw error;
			map.addImage(img.id, image);
			map.addSource(img.id, {
			    'type': 'geojson',
			    'data': {
				'type': 'FeatureCollection',
				'features': [
				    {
					'type': 'Feature',
					'geometry': {
					    'type': 'Point',
					    'coordinates': img.coords
					},
					'properties': {
					    'description': img.url,
					},
				    }
				]
			    }
			});
			map.addLayer({
			    'id': img.id,
			    'type': 'symbol',
			    'source': img.id,
			    'layout': {
				'icon-image': img.id,
				'icon-size': 0.5
			    }
			});
			map.on('click', img.id, (e) => {
			    const description = e.features[0].properties.description;
			    window.open(description,"_blank").focus();
			});
			map.on('mouseenter', img.id, () => {
			    map.getCanvas().style.cursor = 'pointer'
			})
			map.on('mouseleave', img.id, () => {
			    map.getCanvas().style.cursor = ''
			})
		    }
		);
	})
    });
</script>

</body>
</html>
